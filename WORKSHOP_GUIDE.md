# GraphRAG Workshop ê°€ì´ë“œ

## ê°œìš”

ì´ ì›Œí¬ìƒµì€ **ì˜í™” ë¦¬ë·° ë°ì´í„°**ë¥¼ ê¸°ë°˜ìœ¼ë¡œ **Knowledge Graph**ë¥¼ êµ¬ì¶•í•˜ê³ , ì´ë¥¼ í™œìš©í•œ **ì§€ëŠ¥í˜• ê²€ìƒ‰ ì‹œìŠ¤í…œ**ì„ ë§Œë“œëŠ” ê³¼ì •ì…ë‹ˆë‹¤.

### ì „ì²´ ì•„í‚¤í…ì²˜

```
[ì˜í™” ë¦¬ë·° ë°ì´í„°] 
    â†“
[2ë‹¨ê³„: Entity/Relationship ì¶”ì¶œ] â†’ LLMì´ í…ìŠ¤íŠ¸ì—ì„œ ì—”í‹°í‹°ì™€ ê´€ê³„ ì¶”ì¶œ
    â†“
[3ë‹¨ê³„: ìš”ì•½ ë° ì €ì¥] â†’ ì¶”ì¶œëœ ì •ë³´ë¥¼ ìš”ì•½í•˜ì—¬ Neptune/OpenSearchì— ì €ì¥
    â†“
[4ë‹¨ê³„: Text2Cypher ê²€ìƒ‰] â†’ ìì—°ì–´ ì§ˆë¬¸ì„ Cypher ì¿¼ë¦¬ë¡œ ë³€í™˜í•˜ì—¬ ê²€ìƒ‰
    â†“
[5ë‹¨ê³„: Entity as Agent] â†’ íŠ¹ì • ì—”í‹°í‹°(ë°°ìš°)ê°€ Agentë¡œ ë™ì‘í•˜ì—¬ ì›¹ ê²€ìƒ‰ ìˆ˜í–‰
```

### ì‚¬ìš© ê¸°ìˆ  ìŠ¤íƒ

| êµ¬ì„±ìš”ì†Œ | ê¸°ìˆ  | ì—­í•  |
|---------|------|------|
| Graph DB | Amazon Neptune | ì—”í‹°í‹°ì™€ ê´€ê³„ ì €ì¥ |
| Vector Search | Amazon OpenSearch | ë™ì˜ì–´ ë§¤ì¹­, ë²¡í„° ê²€ìƒ‰ |
| LLM | Amazon Bedrock | ì—”í‹°í‹° ì¶”ì¶œ, ìš”ì•½, ì¿¼ë¦¬ ìƒì„± |
| Agent Framework | Strands Agent | Entity as Agent êµ¬í˜„ |
| Web Search | Tavily | ë°°ìš° ìµœì‹  ì •ë³´ ê²€ìƒ‰ |

---

## ì‚¬ì „ ì¤€ë¹„ (0-setup)

### OpenSearch íŒ¨í‚¤ì§€ í™•ì¸

ë°°í¬ í›„ `analysis-nori` í”ŒëŸ¬ê·¸ì¸ì´ ì„¤ì¹˜ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.
- **ì†Œìš” ì‹œê°„**: ë°°í¬ í›„ ì•½ 30ë¶„
- **ê¶Œì¥**: ë°°í¬ í›„ 1ì‹œê°„ ë’¤ì— ì§„í–‰

---

## 1ë‹¨ê³„: Entity Setting (1-entity_setting)

### ì‹¤í–‰ ìœ„ì¹˜
```bash
cd /home/ec2-user/workshop/1-entity_setting/completed
```

### 1-1. Entity ì„¤ì •
```bash
uv run python entity_setting.py
```

**ëª©ì **: OpenSearchì— ì—”í‹°í‹° ì¸ë±ìŠ¤ ìƒì„± ë° ì´ˆê¸° ì„¤ì •

### 1-2. ë™ì˜ì–´ ì‚¬ì „ ì„¤ì •
```bash
uv run python synonym_setting.py
```

**ëª©ì **: í•œêµ­ì–´ ë™ì˜ì–´ ì‚¬ì „ ì„¤ì • (ì˜ˆ: "ì†¡ê°•í˜¸" = "ê°•í˜¸")
**ì†Œìš” ì‹œê°„**: ì•½ 20ë¶„

---

## 2ë‹¨ê³„: Entity Extraction from Chunk (2-entity_extraction_from_chunk)

### ì‹¤í–‰ ìœ„ì¹˜
```bash
cd /home/ec2-user/workshop/2-entity_extraction_from_chunk/completed
```

### ì‹¤í–‰ ëª…ë ¹
```bash
uv run python extraction_entity_from_chunk.py
```

**ì†Œìš” ì‹œê°„**: ì•½ 20ë¶„

### ì²˜ë¦¬ íë¦„

```
[ì˜í™” ë¦¬ë·° JSON íŒŒì¼ë“¤]
    â†“
[í…ìŠ¤íŠ¸ ì²­í‚¹] (1500ì ë‹¨ìœ„, 100ì ì˜¤ë²„ë©)
    â†“
[LLM ì—”í‹°í‹° ì¶”ì¶œ] 
    â†“
[OpenSearch ë™ì˜ì–´ ë§¤ì¹­]
    â†“
[Neptuneì— ì €ì¥]
```

### ìƒì„¸ ì„¤ëª…

#### Step 1: í…ìŠ¤íŠ¸ ì²­í‚¹
```python
text_splitter = RecursiveCharacterTextSplitter(
    chunk_size=1500, 
    chunk_overlap=100
)
chunks = text_splitter.split_text(transcript)
```
- ì˜í™” ë¦¬ë·° í…ìŠ¤íŠ¸ë¥¼ 1500ì ë‹¨ìœ„ë¡œ ë¶„í• 
- 100ì ì˜¤ë²„ë©ìœ¼ë¡œ ë¬¸ë§¥ ìœ ì§€

#### Step 2: LLMìœ¼ë¡œ ì—”í‹°í‹°/ê´€ê³„ ì¶”ì¶œ

í”„ë¡¬í”„íŠ¸(`prompts/graph_extraction.md`)ë¥¼ ì‚¬ìš©í•˜ì—¬ LLMì´ í…ìŠ¤íŠ¸ì—ì„œ ì—”í‹°í‹°ì™€ ê´€ê³„ë¥¼ ì¶”ì¶œí•©ë‹ˆë‹¤.

**ì¶”ì¶œë˜ëŠ” ì—”í‹°í‹° íƒ€ì…**:
| íƒ€ì… | ì„¤ëª… | ì˜ˆì‹œ |
|------|------|------|
| ACTOR | ë°°ìš°/ì—°ê¸°ì | ì†¡ê°•í˜¸, ì „ì§€í˜„, í•˜ì •ìš° |
| MOVIE_STAFF | ì œì‘ì§„ (ê°ë…, ì‘ê³¡ê°€ ë“±) | ë´‰ì¤€í˜¸, ìµœë™í›ˆ |
| MOVIE_CHARACTER | ì˜í™” ì† ìºë¦­í„° | ê¸°íƒ, ì½”ë¸Œ, í•¨ëŒ€ê¸¸ |
| MOVIE | ì˜í™” ì‘í’ˆ | ê¸°ìƒì¶©, ì¸ì…‰ì…˜, ì•”ì‚´ |
| REVIEWER | ë¦¬ë·°ì–´ | ì˜í™” í‰ë¡ ê°€, ìœ íŠœë²„ |

**ì¶”ì¶œ í˜•ì‹**:
```
("entity"|ì—”í‹°í‹°ëª…|ì—”í‹°í‹°íƒ€ì…|ì„¤ëª…)
("relationship"|ì†ŒìŠ¤ì—”í‹°í‹°|ì†ŒìŠ¤íƒ€ì…|íƒ€ê²Ÿì—”í‹°í‹°|íƒ€ê²Ÿíƒ€ì…|ê´€ê³„ì„¤ëª…|ê°•ë„)
```

#### Step 3: OpenSearch ë™ì˜ì–´ ë§¤ì¹­
```python
resolved_entities, entity_metrics = resolve_entities(entities, opensearch_client)
```
- ì¶”ì¶œëœ ì—”í‹°í‹° ì´ë¦„ì„ OpenSearchì—ì„œ ê²€ìƒ‰
- ë™ì˜ì–´ ì‚¬ì „ì„ í†µí•´ ì •ê·œí™”ëœ ì´ë¦„ìœ¼ë¡œ ë§¤ì¹­
- ì˜ˆ: "ê°•í˜¸" â†’ "ì†¡ê°•í˜¸"

#### Step 4: Neptuneì— ì—”í‹°í‹° ì €ì¥
```python
import_nodes_with_dynamic_label(clean_entities, movie_id, reviewer, chunk_id, chunk, chunk_hash)
```
- ì—”í‹°í‹°ë¥¼ Neptune ê·¸ë˜í”„ DBì— ë…¸ë“œë¡œ ì €ì¥
- ë™ì  ë¼ë²¨ë§ (ACTOR, MOVIE_CHARACTER ë“±)

#### Step 5: Neptuneì— ê´€ê³„ ì €ì¥
```python
import_relationships_with_dynamic_label(clean_rels)
```
- ì—”í‹°í‹° ê°„ ê´€ê³„ë¥¼ Neptuneì— Edgeë¡œ ì €ì¥
- ê´€ê³„ ì„¤ëª…ê³¼ ê°•ë„ í¬í•¨

### ì¶œë ¥ ì˜ˆì‹œ
```
ğŸ“„ [1/10] review_001.json
   ğŸ¬ Movie: ì•”ì‚´, Reviewer: DonghoonChoi
   ğŸ“ Chunks: 5
   
   --- Chunk 1/5 ---
   ğŸ“ Extracted: 8 entities, 12 relationships
   
   ğŸ“Š Entity Resolution:
      âœ… 'í•¨ëŒ€ê¸¸' â†’ 'í•¨ëŒ€ê¸¸' (MOVIE_CHARACTER) [exact_match]
      âœ… 'ì „ì§€í˜„' â†’ 'ì „ì§€í˜„' (ACTOR) [exact_match]
      ğŸ†• 'í—ˆë¯¸ë‚˜' (MOVIE_CHARACTER) [NEW]
   
   ğŸ’¾ Saved 8 entities to Neptune (ê¸°ì¡´: 3, ì‹ ê·œ: 5)
   ğŸ’¾ Saved 12 relationships to Neptune (ê¸°ì¡´: 2, ì‹ ê·œ: 10)
```

---

## 3ë‹¨ê³„: Entity & Relationship Summary (3-entity_relationship_summary)

### ì‹¤í–‰ ìœ„ì¹˜
```bash
cd /home/ec2-user/workshop/3-entity_relationship_summary/completed
```

### 3-1. Entity ìš”ì•½
```bash
uv run python entity_summarization.py
```

**ì†Œìš” ì‹œê°„**: ì•½ 15ë¶„

### ì²˜ë¦¬ íë¦„

```
[Neptuneì—ì„œ ì—”í‹°í‹° ì¡°íšŒ]
    â†“
[ì—¬ëŸ¬ descriptionì„ LLMìœ¼ë¡œ ìš”ì•½]
    â†“
[summaryë¥¼ Neptuneì— ì €ì¥]
    â†“
[neptune_id ìƒì„± ë° ì €ì¥]
```

### ìƒì„¸ ì„¤ëª…

ë™ì¼í•œ ì—”í‹°í‹°ê°€ ì—¬ëŸ¬ ì²­í¬ì—ì„œ ì¶”ì¶œë˜ë©´ descriptionì´ ì—¬ëŸ¬ ê°œ ìŒ“ì…ë‹ˆë‹¤.
ì´ë¥¼ LLMìœ¼ë¡œ í•˜ë‚˜ì˜ ìš”ì•½ë¬¸ìœ¼ë¡œ í†µí•©í•©ë‹ˆë‹¤.

**í”„ë¡¬í”„íŠ¸** (`prompts/summarization.md`):
```
Given one or two entities, and a list of descriptions...
Please concatenate all of these into a single, comprehensive description.
```

**ì…ë ¥ ì˜ˆì‹œ**:
```
Entities: ì½”ë¸Œ
Description List: 
- ì½”ë¸ŒëŠ” ê¿ˆì„ ì´ìš©í•œ ì¶”ì¶œ ì‘ì—…ì˜ ë² í…Œë‘ì´ë‹¤
- ì½”ë¸ŒëŠ” ë¶€ì¸ ë§¬ê³¼ í•¨ê»˜ ë¦¼ë³´ì— ë¹ ì¡Œë‹¤ê°€ í˜„ì‹¤ë¡œ ëŒì•„ì™”ë‹¤
- ì½”ë¸ŒëŠ” ë§¬ì˜ ì£½ìŒìœ¼ë¡œ ì¸í•´ ì‚´ì¸ ìš©ì˜ìê°€ ë˜ì–´ ë„ë§ì ì‹ ì„¸ê°€ ë˜ì—ˆë‹¤
```

**ì¶œë ¥ ì˜ˆì‹œ**:
```json
{
  "entity": "ì½”ë¸Œ",
  "summary": "ì½”ë¸ŒëŠ” ì˜í™” ì¸ì…‰ì…˜ì˜ ì£¼ì¸ê³µìœ¼ë¡œ, ê¿ˆì„ ì´ìš©í•œ ì¶”ì¶œ ì‘ì—…ì˜ ë² í…Œë‘ì´ë‹¤..."
}
```

### 3-2. Relationship ìš”ì•½
```bash
uv run python relationship_summarization.py
```

### ì²˜ë¦¬ íë¦„

```
[Neptuneì—ì„œ ê´€ê³„ ì¡°íšŒ]
    â†“
[ì—¬ëŸ¬ descriptionì„ LLMìœ¼ë¡œ ìš”ì•½]
    â†“
[summaryë¥¼ Neptune ê´€ê³„ì— ì €ì¥]
```

ì—”í‹°í‹°ì™€ ë™ì¼í•œ ë°©ì‹ìœ¼ë¡œ ê´€ê³„ì˜ descriptionë“¤ì„ ìš”ì•½í•©ë‹ˆë‹¤.

### 3-3. Entityë¥¼ OpenSearchë¡œ ì´ë™
```bash
uv run python entity_to_opensearch.py
```

**ì†Œìš” ì‹œê°„**: ì•½ 20ë¶„

### ì²˜ë¦¬ íë¦„

```
[Neptuneì—ì„œ ìš”ì•½ëœ ì—”í‹°í‹° ì¡°íšŒ]
    â†“
[OpenSearchì—ì„œ nameìœ¼ë¡œ ê²€ìƒ‰]
    â†“
[summary í…ìŠ¤íŠ¸ë¥¼ ë²¡í„° ì„ë² ë”©]
    â†“
[OpenSearchì— summary, summary_vec ì—…ë°ì´íŠ¸]
```

### ìƒì„¸ ì„¤ëª…

```python
# Bedrock ì„ë² ë”©ìœ¼ë¡œ ë²¡í„° ìƒì„±
summary_vec = embedder.embed_text(summary)  # 1024ì°¨ì› ë²¡í„°

# OpenSearch ì—…ë°ì´íŠ¸
update_body = {
    "doc": {
        "entity": {
            "summary": summary,
            "summary_vec": summary_vec,
            "neptune_id": neptune_id
        }
    }
}
```

ì´ ë‹¨ê³„ë¥¼ í†µí•´ OpenSearchì—ì„œ **ë²¡í„° ìœ ì‚¬ë„ ê²€ìƒ‰**ì´ ê°€ëŠ¥í•´ì§‘ë‹ˆë‹¤.

---

## 4ë‹¨ê³„: Neptune Text2Cypher ê²€ìƒ‰ (4-search_neptune)

### ì‹¤í–‰ ìœ„ì¹˜
```bash
cd /home/ec2-user/workshop/4-search_neptune/completed
```

### ì‹¤í–‰ ëª…ë ¹
```bash
uv run python movie_search_neptune.py
```

### ì²˜ë¦¬ íë¦„

```
[ì‚¬ìš©ì ìì—°ì–´ ì§ˆë¬¸]
    â†“
[Step 1: LLMìœ¼ë¡œ ì—”í‹°í‹° ì¶”ì¶œ]
    â†“
[Step 2: OpenSearchë¡œ ì—”í‹°í‹° ì´ë¦„ í•´ê²°]
    â†“
[Step 3: ì¿¼ë¦¬ ì—…ë°ì´íŠ¸]
    â†“
[Step 4: LLMìœ¼ë¡œ Cypher ì¿¼ë¦¬ ìƒì„±]
    â†“
[Step 5: Neptuneì—ì„œ ì‹¤í–‰]
    â†“
[Step 6: ê²°ê³¼ ìš”ì•½]
```

### ìƒì„¸ ì„¤ëª…

#### Step 1: ì¿¼ë¦¬ì—ì„œ ì—”í‹°í‹° ì¶”ì¶œ

í”„ë¡¬í”„íŠ¸ (`prompts/get_entity.md`)ë¥¼ ì‚¬ìš©í•˜ì—¬ ì‚¬ìš©ì ì§ˆë¬¸ì—ì„œ ì—”í‹°í‹°ë¥¼ ì¶”ì¶œí•©ë‹ˆë‹¤.

**ì…ë ¥**: "ëŒ€ê¸¸ê³¼ ê³ ê´‘ë ¬ì€ ì–´ë–¤ ê´€ê³„ì•¼?"
**ì¶œë ¥**: `["ëŒ€ê¸¸", "ê³ ê´‘ë ¬"]`

#### Step 2: OpenSearchë¡œ ì—”í‹°í‹° ì´ë¦„ í•´ê²°

```python
resolved_mapping = resolve_entities_with_opensearch(entities, opensearch_client)
# {'ëŒ€ê¸¸': 'í•¨ëŒ€ê¸¸', 'ê³ ê´‘ë ¬': 'ê³ ê´‘ë ¬'}
```

ë™ì˜ì–´ ì‚¬ì „ì„ í†µí•´ ì •í™•í•œ ì—”í‹°í‹° ì´ë¦„ìœ¼ë¡œ ë§¤í•‘í•©ë‹ˆë‹¤.

#### Step 3: ì¿¼ë¦¬ ì—…ë°ì´íŠ¸

```python
updated_query = query
for original, resolved in resolved_mapping.items():
    updated_query = updated_query.replace(original, resolved)
# "í•¨ëŒ€ê¸¸ê³¼ ê³ ê´‘ë ¬ì€ ì–´ë–¤ ê´€ê³„ì•¼?"
```

#### Step 4: Cypher ì¿¼ë¦¬ ìƒì„±

í”„ë¡¬í”„íŠ¸ (`prompts/query_to_cyper.md`)ë¥¼ ì‚¬ìš©í•˜ì—¬ ìì—°ì–´ë¥¼ Cypherë¡œ ë³€í™˜í•©ë‹ˆë‹¤.

**ì…ë ¥**: "í•¨ëŒ€ê¸¸ê³¼ ê³ ê´‘ë ¬ì€ ì–´ë–¤ ê´€ê³„ì•¼?"
**ì¶œë ¥**:
```cypher
MATCH (a)-[r:RELATIONSHIP]-(b) 
WHERE (a.name = 'í•¨ëŒ€ê¸¸' OR a.name CONTAINS 'í•¨ëŒ€ê¸¸') 
  AND (b.name = 'ê³ ê´‘ë ¬' OR b.name CONTAINS 'ê³ ê´‘ë ¬')
RETURN a.name, r.description, r.summary, b.name 
LIMIT 20
```

#### Step 5 & 6: ì‹¤í–‰ ë° ìš”ì•½

Neptuneì—ì„œ Cypher ì¿¼ë¦¬ë¥¼ ì‹¤í–‰í•˜ê³ , ê²°ê³¼ë¥¼ LLMìœ¼ë¡œ ìš”ì•½í•©ë‹ˆë‹¤.

### ì˜ˆì‹œ ì¿¼ë¦¬ë“¤

```python
queries = [
    "ì¬ë”ì™€ ê°€ë“  ê·¸ë¦¬ê³  ì´ì•ˆì€ ì–´ë–¤ ê´€ê³„ì•¼?",
    "ëŒ€ê¸¸ê³¼ ê³ ê´‘ë ¬ì€ ì–´ë–¤ ê´€ê³„ì•¼?",
    "ê¹€ìœ¤ì„ì´ëŠ” ì—°ê¸°í•œ ìºë¦­í„°ëŠ”?",
    "ì „ìš°ì¹˜ì™€ ë¬´ë¥µì˜ ê´€ê³„ëŠ” ì–´ë–¤ê´€ê³„ê°€ ìˆëŠ”ì§€ ê°€ë³€ê¸¸ì´ë¥¼ í™œìš©í•´ì„œ ì°¾ì•„ì¤˜"
]
```

---

## 5ë‹¨ê³„: Entity as Agent (5-entity-as-agent)

### ì‹¤í–‰ ìœ„ì¹˜
```bash
cd /home/ec2-user/workshop/5-entity-as-agent/completed
```

### ì‚¬ì „ ì„¤ì¹˜
```bash
uv pip install tavily-python
```

### 5-1. Actorì— í”„ë¡¬í”„íŠ¸ ì¶”ê°€
```bash
uv run python add_actor_prompt.py
```

### ì²˜ë¦¬ ë‚´ìš©

ëª¨ë“  ACTOR ì—”í‹°í‹°ì— `prompt` í”„ë¡œí¼í‹°ë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤.

```python
DEFAULT_ACTOR_PROMPT = """ì´ ë°°ìš°({name})ì— ëŒ€í•œ ì§ˆë¬¸ ì²˜ë¦¬ ê·œì¹™:
- ì¶œì—°ì‘, ë°°ì—­, ì˜í™” ê´€ê³„ ì§ˆë¬¸ â†’ search_neptune ë„êµ¬ë§Œ ì‚¬ìš©
- "ìµœì‹ ", "ê·¼í™©", "ìˆ˜ìƒ", "ë‰´ìŠ¤", "í˜„ì¬", "ìš”ì¦˜" í‚¤ì›Œë“œê°€ ìˆì„ ë•Œë§Œ â†’ search_web ë„êµ¬ ì‚¬ìš©
- í‚¤ì›Œë“œê°€ ì—†ìœ¼ë©´ ì ˆëŒ€ ì›¹ ê²€ìƒ‰í•˜ì§€ ë§ê³  Neptune ë°ì´í„°ë§Œ ì‚¬ìš©"""
```

ì´ í”„ë¡¬í”„íŠ¸ëŠ” ë‚˜ì¤‘ì— Agentê°€ í•´ë‹¹ ë°°ìš°ì— ëŒ€í•œ ì§ˆë¬¸ì„ ì²˜ë¦¬í•  ë•Œ ì£¼ì…ë©ë‹ˆë‹¤.

### 5-2. Entity Agent ê²€ìƒ‰ ì‹¤í–‰

#### ì›¹ ê²€ìƒ‰ì´ í•„ìš”í•œ ê²½ìš° (ìµœì‹  ì •ë³´ ìš”ì²­)
```bash
uv run python movie_search_neptune_entity_agent.py "í•¨ëŒ€ê¸¸ê³¼ í—ˆë¯¸ë‚˜ì˜ ì´í•´ê´€ê³„ì™€ ìŠ¤í† ë¦¬ë¥¼ ì•Œê³  ì‹¶ì–´. ë”í•˜ì—¬ ì´ë¥¼ ì—°ê¸°í•œ ë°°ìš°ì˜ ìµœì‹  ì •ë³´ë¥¼ ì•Œê³ ì‹¶ì–´"
```

â†’ "ìµœì‹ "ì´ë¼ëŠ” í‚¤ì›Œë“œê°€ ìˆìœ¼ë¯€ë¡œ **ì›¹ ê²€ìƒ‰(Tavily)** ìˆ˜í–‰

#### ì›¹ ê²€ìƒ‰ì´ í•„ìš” ì—†ëŠ” ê²½ìš°
```bash
uv run python movie_search_neptune_entity_agent.py "í•¨ëŒ€ê¸¸ê³¼ í—ˆë¯¸ë‚˜ì˜ ì´í•´ê´€ê³„ì™€ ìŠ¤í† ë¦¬ë¥¼ ì•Œê³  ì‹¶ì–´. ë”í•˜ì—¬ ì´ë¥¼ ì—°ê¸°í•œ ë°°ìš°ì˜ ì •ë³´ë¥¼ ì•Œê³ ì‹¶ì–´"
```

â†’ "ìµœì‹ " í‚¤ì›Œë“œê°€ ì—†ìœ¼ë¯€ë¡œ **Neptune ê²€ìƒ‰ë§Œ** ìˆ˜í–‰

### ì²˜ë¦¬ íë¦„

```
[ì‚¬ìš©ì ì§ˆë¬¸]
    â†“
[Step 1: ì—”í‹°í‹° ì¶”ì¶œ]
    â†“
[Step 2: OpenSearchë¡œ ì´ë¦„ í•´ê²°]
    â†“
[Step 3: Cypher ì¿¼ë¦¬ ì‹¤í–‰]
    â†“
[Step 4: ê²°ê³¼ì—ì„œ ì—”í‹°í‹°ì˜ prompt í™•ì¸]
    â†“
[Step 4-1: ìºë¦­í„°ì™€ ì—°ê²°ëœ ACTOR ì¡°íšŒ]
    â†“
[Step 5: promptê°€ ìˆëŠ” ì—”í‹°í‹° â†’ Strands Agentë¡œ ì²˜ë¦¬ (ë³‘ë ¬)]
    â†“
[Step 6: ìµœì¢… ë‹µë³€ ìƒì„±]
```

### í•µì‹¬ ê°œë…: Entity as Agent

ì¼ë°˜ì ì¸ GraphRAGëŠ” ê·¸ë˜í”„ì—ì„œ ë°ì´í„°ë¥¼ ì¡°íšŒí•˜ê³  ëë‚©ë‹ˆë‹¤.
í•˜ì§€ë§Œ **Entity as Agent**ëŠ” íŠ¹ì • ì—”í‹°í‹°(ì—¬ê¸°ì„œëŠ” ACTOR)ê°€ **ìì²´ì ì¸ ë„êµ¬**ë¥¼ ê°€ì§€ê³  **Agentë¡œ ë™ì‘**í•©ë‹ˆë‹¤.

```python
# ACTOR ì—”í‹°í‹°ì— ì €ì¥ëœ prompt
prompt = """ì´ ë°°ìš°({name})ì— ëŒ€í•œ ì§ˆë¬¸ ì²˜ë¦¬ ê·œì¹™:
- ì¶œì—°ì‘, ë°°ì—­ ì§ˆë¬¸ â†’ search_neptune ë„êµ¬ ì‚¬ìš©
- "ìµœì‹ " í‚¤ì›Œë“œ ìˆì„ ë•Œë§Œ â†’ search_web ë„êµ¬ ì‚¬ìš©"""

# Agent ìƒì„± ë° ì‹¤í–‰
agent = Agent(
    system_prompt=f"ë‹¹ì‹ ì€ ë°°ìš° ì •ë³´ ì „ë¬¸ê°€ì…ë‹ˆë‹¤.\n{prompt_filled}",
    tools=[search_neptune, search_web]  # ë°°ìš° ì „ìš© ë„êµ¬
)
response = agent(f"ë°°ìš° '{entity_name}'ì— ëŒ€í•´ ë‹µë³€í•´ì£¼ì„¸ìš”.")
```

### Actor Tools (actor_tools.py)

#### search_neptune
```python
@tool
def search_neptune(actor_name: str) -> str:
    """Neptune ê·¸ë˜í”„DBì—ì„œ ë°°ìš° ì •ë³´ë¥¼ ì¡°íšŒí•©ë‹ˆë‹¤."""
    cypher = """
    MATCH (a:ACTOR {name: $name})
    RETURN a.name AS name, a.description AS description
    """
    result = execute_cypher(cypher, name=actor_name)
    ...
```

#### search_web
```python
@tool
def search_web(actor_name: str, search_type: str = "recent") -> str:
    """ì›¹ì—ì„œ ë°°ìš°ì˜ ìµœì‹  ì •ë³´ë¥¼ ê²€ìƒ‰í•©ë‹ˆë‹¤. (Tavily ì‚¬ìš©)"""
    query = f"ë°°ìš° {actor_name} ìµœì‹  ê·¼í™© 2024 2025"
    response = tavily.search(query=query, max_results=5)
    ...
```

### ë³‘ë ¬ ì²˜ë¦¬

ì—¬ëŸ¬ ë°°ìš°ì— ëŒ€í•œ ì •ë³´ê°€ í•„ìš”í•œ ê²½ìš°, ë³‘ë ¬ë¡œ Agentë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤.

```python
async def process_agentic_entities_parallel(agentic_list: list, user_query: str):
    tasks = [
        loop.run_in_executor(_executor, process_agentic_entity, item['name'], item['prompt'], user_query)
        for item in agentic_list
    ]
    results = await asyncio.gather(*tasks)
    return results
```

---

## Validation (ê²€ì¦)

### ì‹¤í–‰ ìœ„ì¹˜
```bash
cd /home/ec2-user/workshop/validation
```

### ì—”í‹°í‹° ë°ì´í„° í™•ì¸
```bash
uv run python check_entity.py
```

**ì¶œë ¥ ë‚´ìš©**:
- ì „ì²´ ì—”í‹°í‹° ê°œìˆ˜
- ìš”ì•½ ì™„ë£Œ/ë¯¸ì™„ë£Œ ê°œìˆ˜
- íƒ€ì…ë³„ ê°œìˆ˜ (ACTOR, MOVIE_CHARACTER, MOVIE_STAFF ë“±)
- ê° ì—”í‹°í‹°ì˜ ìƒì„¸ ì •ë³´ (name, description, summary, neptune_id)

### ê·¸ë˜í”„ ë¶„ì„
```bash
uv run python graph_analysis.py
```

**ì¶œë ¥ ë‚´ìš©**:
- Neptuneì˜ ì´ ë…¸ë“œ ê°œìˆ˜
- Neptuneì˜ ì´ ì—£ì§€(ê´€ê³„) ê°œìˆ˜
- ì¤‘ë³µ ê´€ê³„ í™•ì¸

### ê´€ê³„ ë°ì´í„° í™•ì¸
```bash
uv run python check_relationship.py
```

**ì¶œë ¥ ë‚´ìš©**:
- ì „ì²´ ê´€ê³„ ê°œìˆ˜
- ìš”ì•½ ì™„ë£Œ/ë¯¸ì™„ë£Œ ê°œìˆ˜
- íƒ€ì… ì¡°í•©ë³„ ê°œìˆ˜ (ACTORâ†’MOVIE_CHARACTER, MOVIE_CHARACTERâ†’MOVIE ë“±)
- ê° ê´€ê³„ì˜ ìƒì„¸ ì •ë³´ (source, target, description, summary, strength)

---

## ë°ì´í„° íë¦„ ìš”ì•½

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           GraphRAG Workshop ë°ì´í„° íë¦„                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

[ì˜í™” ë¦¬ë·° JSON]
      â”‚
      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  2ë‹¨ê³„: ì¶”ì¶œ     â”‚
â”‚  - í…ìŠ¤íŠ¸ ì²­í‚¹   â”‚
â”‚  - LLM ì—”í‹°í‹°   â”‚
â”‚    ì¶”ì¶œ         â”‚
â”‚  - ë™ì˜ì–´ ë§¤ì¹­  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Neptune (Graph DB)                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚  ACTOR   â”‚â”€â”€â”€â–¶â”‚ RELATIONSHIP â”‚â—€â”€â”€â”€â”‚CHARACTER â”‚              â”‚
â”‚  â”‚ (ë°°ìš°)   â”‚    â”‚   (ê´€ê³„)     â”‚    â”‚ (ìºë¦­í„°) â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚       â”‚                                    â”‚                    â”‚
â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚                        â–¼                                        â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                               â”‚
â”‚              â”‚     __Chunk__    â”‚                               â”‚
â”‚              â”‚   (ì›ë³¸ í…ìŠ¤íŠ¸)  â”‚                               â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ 3ë‹¨ê³„: ìš”ì•½
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     OpenSearch (Vector DB)                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Entity Index                                             â”‚   â”‚
â”‚  â”‚  - name: "ì „ì§€í˜„"                                         â”‚   â”‚
â”‚  â”‚  - entity_type: "ACTOR"                                   â”‚   â”‚
â”‚  â”‚  - summary: "ì „ì§€í˜„ì€ í•œêµ­ì˜ ëŒ€í‘œì ì¸ ì—¬ë°°ìš°ë¡œ..."         â”‚   â”‚
â”‚  â”‚  - summary_vec: [0.123, 0.456, ...] (1024ì°¨ì›)           â”‚   â”‚
â”‚  â”‚  - neptune_id: "ì „ì§€í˜„_ACTOR_abc123"                      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ 4ë‹¨ê³„: ê²€ìƒ‰
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Text2Cypher ê²€ìƒ‰                            â”‚
â”‚                                                                  â”‚
â”‚  "ëŒ€ê¸¸ê³¼ ê³ ê´‘ë ¬ì€ ì–´ë–¤ ê´€ê³„ì•¼?"                                  â”‚
â”‚         â”‚                                                        â”‚
â”‚         â–¼                                                        â”‚
â”‚  [ì—”í‹°í‹° ì¶”ì¶œ] â†’ ["ëŒ€ê¸¸", "ê³ ê´‘ë ¬"]                              â”‚
â”‚         â”‚                                                        â”‚
â”‚         â–¼                                                        â”‚
â”‚  [OpenSearch ë§¤ì¹­] â†’ {"ëŒ€ê¸¸": "í•¨ëŒ€ê¸¸", "ê³ ê´‘ë ¬": "ê³ ê´‘ë ¬"}      â”‚
â”‚         â”‚                                                        â”‚
â”‚         â–¼                                                        â”‚
â”‚  [Cypher ìƒì„±] â†’ MATCH (a)-[r]-(b) WHERE a.name='í•¨ëŒ€ê¸¸'...     â”‚
â”‚         â”‚                                                        â”‚
â”‚         â–¼                                                        â”‚
â”‚  [Neptune ì‹¤í–‰] â†’ ê²°ê³¼ ë°˜í™˜                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ 5ë‹¨ê³„: Entity as Agent
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Entity as Agent                             â”‚
â”‚                                                                  â”‚
â”‚  "ì „ì§€í˜„ì˜ ìµœì‹  ê·¼í™©ì„ ì•Œê³  ì‹¶ì–´"                                â”‚
â”‚         â”‚                                                        â”‚
â”‚         â–¼                                                        â”‚
â”‚  [ACTOR ì—”í‹°í‹°ì˜ prompt í™•ì¸]                                    â”‚
â”‚         â”‚                                                        â”‚
â”‚         â–¼                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  Strands Agent (ì „ì§€í˜„ ì „ìš©)                             â”‚    â”‚
â”‚  â”‚  - system_prompt: "ì´ ë°°ìš°ì— ëŒ€í•œ ì§ˆë¬¸ ì²˜ë¦¬ ê·œì¹™..."     â”‚    â”‚
â”‚  â”‚  - tools: [search_neptune, search_web]                   â”‚    â”‚
â”‚  â”‚                                                          â”‚    â”‚
â”‚  â”‚  "ìµœì‹ " í‚¤ì›Œë“œ ê°ì§€ â†’ search_web(Tavily) í˜¸ì¶œ           â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚         â”‚                                                        â”‚
â”‚         â–¼                                                        â”‚
â”‚  [ìµœì¢… ë‹µë³€ ìƒì„±]                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## í•µì‹¬ íŒŒì¼ êµ¬ì¡°

```
real_graphrag_workshop_aws/
â”œâ”€â”€ data/                          # ì›ë³¸ ë°ì´í„°
â”‚   â”œâ”€â”€ movies/                    # ì˜í™” ì •ë³´
â”‚   â”œâ”€â”€ actors_chractor/           # ë°°ìš°-ìºë¦­í„° ì •ë³´
â”‚   â”œâ”€â”€ reviews/                   # ì˜í™” ë¦¬ë·° (ì…ë ¥ ë°ì´í„°)
â”‚   â””â”€â”€ ...
â”‚
â”œâ”€â”€ 2-entity_extraction_from_chunk/
â”‚   â””â”€â”€ completed/
â”‚       â”œâ”€â”€ extraction_entity_from_chunk.py  # ë©”ì¸ íŒŒì´í”„ë¼ì¸
â”‚       â”œâ”€â”€ prompts/graph_extraction.md      # ì—”í‹°í‹° ì¶”ì¶œ í”„ë¡¬í”„íŠ¸
â”‚       â”œâ”€â”€ neptune/                         # Neptune ì—°ê²° ë° ì¿¼ë¦¬
â”‚       â”œâ”€â”€ opensearch/                      # OpenSearch ì—°ê²° ë° ê²€ìƒ‰
â”‚       â””â”€â”€ utils/                           # ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜
â”‚
â”œâ”€â”€ 3-entity_relationship_summary/
â”‚   â””â”€â”€ completed/
â”‚       â”œâ”€â”€ entity_summarization.py          # ì—”í‹°í‹° ìš”ì•½
â”‚       â”œâ”€â”€ relationship_summarization.py    # ê´€ê³„ ìš”ì•½
â”‚       â”œâ”€â”€ entity_to_opensearch.py          # OpenSearch ë™ê¸°í™”
â”‚       â””â”€â”€ prompts/summarization.md         # ìš”ì•½ í”„ë¡¬í”„íŠ¸
â”‚
â”œâ”€â”€ 4-search_neptune/
â”‚   â””â”€â”€ completed/
â”‚       â”œâ”€â”€ movie_search_neptune.py          # Text2Cypher ê²€ìƒ‰
â”‚       â””â”€â”€ prompts/
â”‚           â”œâ”€â”€ get_entity.md                # ì—”í‹°í‹° ì¶”ì¶œ í”„ë¡¬í”„íŠ¸
â”‚           â””â”€â”€ query_to_cyper.md            # Cypher ìƒì„± í”„ë¡¬í”„íŠ¸
â”‚
â”œâ”€â”€ 5-entity-as-agent/
â”‚   â””â”€â”€ completed/
â”‚       â”œâ”€â”€ add_actor_prompt.py              # ACTORì— prompt ì¶”ê°€
â”‚       â”œâ”€â”€ movie_search_neptune_entity_agent.py  # Entity Agent ê²€ìƒ‰
â”‚       â””â”€â”€ actor_tools.py                   # Agent ë„êµ¬ (Neptune, Web)
â”‚
â””â”€â”€ validation/
    â”œâ”€â”€ check_entity.py                      # ì—”í‹°í‹° ê²€ì¦
    â”œâ”€â”€ check_relationship.py                # ê´€ê³„ ê²€ì¦
    â””â”€â”€ graph_analysis.py                    # ê·¸ë˜í”„ í†µê³„
```

---

## ì‹¤í–‰ ìˆœì„œ ìš”ì•½

| ìˆœì„œ | ë‹¨ê³„ | ëª…ë ¹ì–´ | ì†Œìš”ì‹œê°„ |
|------|------|--------|----------|
| 0 | ì‚¬ì „ ì¤€ë¹„ | OpenSearch nori í”ŒëŸ¬ê·¸ì¸ í™•ì¸ | ë°°í¬ í›„ 30ë¶„ ëŒ€ê¸° |
| 1-1 | Entity ì„¤ì • | `uv run python entity_setting.py` | - |
| 1-2 | ë™ì˜ì–´ ì„¤ì • | `uv run python synonym_setting.py` | 20ë¶„ |
| 2 | ì—”í‹°í‹° ì¶”ì¶œ | `uv run python extraction_entity_from_chunk.py` | 20ë¶„ |
| 3-1 | ì—”í‹°í‹° ìš”ì•½ | `uv run python entity_summarization.py` | 15ë¶„ |
| 3-2 | ê´€ê³„ ìš”ì•½ | `uv run python relationship_summarization.py` | - |
| 3-3 | OpenSearch ë™ê¸°í™” | `uv run python entity_to_opensearch.py` | 20ë¶„ |
| 4 | Text2Cypher ê²€ìƒ‰ | `uv run python movie_search_neptune.py` | - |
| 5-1 | Actor í”„ë¡¬í”„íŠ¸ ì¶”ê°€ | `uv run python add_actor_prompt.py` | - |
| 5-2 | Entity Agent ê²€ìƒ‰ | `uv run python movie_search_neptune_entity_agent.py "<ì§ˆë¬¸>"` | - |
